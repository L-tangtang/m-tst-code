{"ast":null,"code":"var _jsxFileName = \"D:\\\\-----------\\u5386\\u53F2\\u5B66\\u4E60--------\\\\\\u9AD8\\u7EA7node~~~11\\\\\\u81EA\\u6D4B\\\\\\u7EC3\\u4E60\\u6708\\u8003\\\\client-react\\\\src\\\\views\\\\home.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass componentName extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currIndex: 0,\n      callback: i => true,\n      navList: [{\n        name: '全部',\n        callback: i => true\n      }, {\n        name: '正在进行',\n        callback: i => i.dateTime > new Date().getTime()\n      }, {\n        name: '已结束',\n        callback: i => i.dateTime <= new Date().getTime()\n      }]\n    };\n  }\n\n  render() {\n    let {\n      list\n    } = this.props;\n    const {\n      callback,\n      currIndex,\n      navList\n    } = this.state;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      onClick: () => this.props.history.push('/add'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }, \"\\u6807\\u9898\\uFF1A\\u53D1\\u8D77\\u6295\\u7968\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, navList.map((item, index) => React.createElement(\"span\", {\n      key: index,\n      className: currIndex === index ? 'active' : '',\n      onClick: this.headleInd.bind(this, index, item.callback),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, item.name))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, list.filter(callback).map(item => React.createElement(\"li\", {\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, item.title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, this.headleTime(item.dateTime))))));\n  }\n\n  componentDidMount() {\n    this.props.initData(this);\n  }\n\n  headleInd(index, callback) {\n    this.setState({\n      currIndex: index,\n      callback\n    });\n  }\n\n  headleTime(time) {\n    let str = JSON.stringify(new Date(JSON.parse(time)));\n    let newStr = str.slice(1, 11) + '——' + str.slice(12, 20);\n    return newStr;\n  }\n\n}\n\nlet a = store => {\n  let {\n    list\n  } = store;\n  return {\n    list\n  };\n};\n\nlet b = dispatch => {\n  return {\n    async initData(that) {\n      let res = await that.http('get', '/list');\n      const {\n        code,\n        msg,\n        data\n      } = res.data;\n\n      if (code === 1) {\n        dispatch({\n          type: 'CHANGE_LIST',\n          list: data\n        });\n        return;\n      }\n\n      alert(msg);\n    }\n\n  };\n};\n\nexport default connect(a, b)(componentName);","map":{"version":3,"sources":["D:/-----------历史学习--------/高级node~~~11/自测/练习月考/client-react/src/views/home.js"],"names":["React","Component","connect","componentName","state","currIndex","callback","i","navList","name","dateTime","Date","getTime","render","list","props","history","push","map","item","index","headleInd","bind","filter","id","title","headleTime","componentDidMount","initData","setState","time","str","JSON","stringify","parse","newStr","slice","a","store","b","dispatch","that","res","http","code","msg","data","type","alert"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass componentName extends Component {\r\n    state = {\r\n        currIndex: 0,\r\n        callback: i => true,\r\n        navList: [\r\n            {\r\n                name: '全部',\r\n                callback: i => true,\r\n            },\r\n            {\r\n                name: '正在进行',\r\n                callback: i => i.dateTime > new Date().getTime(),\r\n            },\r\n            {\r\n                name: '已结束',\r\n                callback: i => i.dateTime <= new Date().getTime(),\r\n            },\r\n        ],\r\n    };\r\n    render() {\r\n        let { list } = this.props;\r\n        const { callback, currIndex, navList } = this.state;\r\n        return (\r\n            <div>\r\n                <h3 onClick={() => this.props.history.push('/add')}>标题：发起投票</h3>\r\n                <li>\r\n                    {navList.map((item, index) => (\r\n                        <span\r\n                            key={index}\r\n                            className={currIndex === index ? 'active' : ''}\r\n                            onClick={this.headleInd.bind(this, index, item.callback)}\r\n                        >\r\n                            {item.name}\r\n                        </span>\r\n                    ))}\r\n                </li>\r\n                <div>\r\n                    {list.filter(callback).map(item => (\r\n                        <li key={item.id}>\r\n                            <p>{item.title}</p>\r\n                            <p>{this.headleTime(item.dateTime)}</p>\r\n                        </li>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    componentDidMount() {\r\n        this.props.initData(this);\r\n    }\r\n    headleInd(index, callback) {\r\n        this.setState({\r\n            currIndex: index,\r\n            callback,\r\n        });\r\n    }\r\n    headleTime(time) {\r\n        let str = JSON.stringify(new Date(JSON.parse(time)));\r\n        let newStr = str.slice(1, 11) + '——' + str.slice(12, 20);\r\n        return newStr;\r\n    }\r\n}\r\nlet a = store => {\r\n    let { list } = store;\r\n    return {\r\n        list,\r\n    };\r\n};\r\nlet b = dispatch => {\r\n    return {\r\n        async initData(that) {\r\n            let res = await that.http('get', '/list');\r\n            const { code, msg, data } = res.data;\r\n            if (code === 1) {\r\n                dispatch({ type: 'CHANGE_LIST', list: data });\r\n                return;\r\n            }\r\n            alert(msg);\r\n        },\r\n    };\r\n};\r\nexport default connect(a, b)(componentName);\r\n"]},"metadata":{},"sourceType":"module"}